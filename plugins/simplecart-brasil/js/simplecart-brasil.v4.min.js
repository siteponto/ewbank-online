// Revisado e estilizado por Maicom Oliveira: simplecart-brasil.blogspot.com

function Cart(){function e(e){for(var t=Math.floor(e),a=new String(e),i=0;i<a.length&&"."!=a.charAt(i);i++);var r=""+Math.round(100*e);return r=r.substring(r.length-2,r.length),t+="9"==a.charAt(i+2)&&"00"==r?1:0,"0"==r&&(r="00"),t+","+r}var t=this;t.Version="2.0.1",t.Shelf=new Shelf,t.items={},t.isLoaded=!1,t.pageIsReady=!1,t.quantity=0,t.total=0,t.taxRate=0,t.taxCost=0,t.shippingFlatRate=0,t.shippingTotalRate=0,t.shippingQuantityRate=0,t.shippingWeight=0,t.shippingRate=0,t.shippingCost=0,t.currency=BRL,t.checkoutTo=PagSeguro,

t.email="skintapedesign@hotmail.com",

t.merchantId="",t.cartHeaders=["name","price","quantity","total"],t.add=function(){var e=this;e.pageIsReady||(e.initializeView(),e.update()),e.isLoaded||(e.load(),e.update());var t=new CartItem;if(!arguments||0===arguments.length)return void error("No values passed for item.");var a=arguments;if(arguments[0]&&"string"!=typeof arguments[0]&&"number"!=typeof arguments[0]&&(a=arguments[0]),t.parseValuesFromArray(a),t.checkQuantityAndPrice(),e.hasItem(t)){var i=e.hasItem(t);e.items[i].quantity=parseInt(e.items[i].quantity,10)+parseInt(t.quantity,10)}else e.items[t.id]=t;e.update()},t.remove=function(e){var t={};for(var a in this.items)a!=e&&(t[a]=this.items[a]);this.items=t},t.empty=function(){simpleCart.items={},simpleCart.update()},t.find=function(e){if(!e)return null;var a=[];for(var i in t.items){var r=t.items[i],n=!0;for(var s in e)r[s]&&r[s]==e[s]||(n=!1);n&&a.push(t.next)}return 0==a.length?null:a},t.checkout=function(){if(0===simpleCart.quantity)return void error("Carrinho está vazio");switch(simpleCart.checkoutTo){case PayPal:simpleCart.paypalCheckout();break;case GoogleCheckout:simpleCart.googleCheckout();break;case Email:simpleCart.emailCheckout();break;default:simpleCart.pagseguroCheckout()}},t.paypalCheckout=function(){var e=this,t="https://www.paypal.com/cgi-bin/webscr?cmd=_cart&upload=1&business="+e.email+"&currency_code="+e.currency,a=1,i="";e.taxRate&&(t=t+"&tax_cart="+e.currencyStringForPaypalCheckout(e.taxCost));for(var r in e.items){var n=e.items[r],s="";for(var o in n)"function"!=typeof n[o]&&"id"!=o&&"price"!=o&&"quantity"!=o&&"name"!=o&&"shipping"!=o&&(s=s+", "+o+"="+n[o]);s=s.substring(2),i=i+"&item_name_"+a+"="+n.name+"&item_number_"+a+"="+a+"&quantity_"+a+"="+n.quantity+"&amount_"+a+"="+e.currencyStringForPaypalCheckout(n.price)+"&on0_"+a+"=Options&os0_"+a+"="+s,a++}0!=e.shipping()&&(i=i+"&item_name_"+a+"=Shipping&item_number_"+a+"="+a+"&quantity_"+a+"=1&amount_"+a+"="+e.currencyStringForPaypalCheckout(e.shippingCost)),t+=i,window.open(t,"paypal","scrollbars,location,resizable,status")},t.googleCheckout=function(){var e=this;if(e.currency!=USD&&e.currency!=GBP)return void error("Google Checkout only allows the USD and GBP for currency.");if(""===e.merchantId||null===e.merchantId||!e.merchantId)return void error("No merchant Id for google checkout supplied.");var t=document.createElement("form"),a=1;t.style.display="none",t.method="POST",t.action="https://checkout.google.com/api/checkout/v2/checkoutForm/Merchant/"+e.merchantId,t.acceptCharset="utf-8";for(var i in e.items){var r=e.items[i];t.appendChild(e.createHiddenElement("item_name_"+a,r.name)),t.appendChild(e.createHiddenElement("item_quantity_"+a,r.quantity)),t.appendChild(e.createHiddenElement("item_price_"+a,r.price)),t.appendChild(e.createHiddenElement("item_currency_"+a,e.currency)),t.appendChild(e.createHiddenElement("item_tax_rate_"+a,e.taxRate)),t.appendChild(e.createHiddenElement("_charset_",""));var n="";for(var s in r)"function"!=typeof r[s]&&"id"!=s&&"quantity"!=s&&"price"!=s&&(n=n+", "+s+": "+r[s]);n=n.substring(1),t.appendChild(e.createHiddenElement("item_description_"+a,n)),a++}document.body.appendChild(t),t.submit(),document.body.removeChild(t)},t.emailCheckout=function(){},t.pagseguroCheckout=function(){var t=this,a=document.createElement("form"),i=1;a.style.display="none",a.method="POST",a.target="pagseguro",a.action="https://pagseguro.uol.com.br/checkout/checkout.jhtml",a.acceptCharset="utf-8",a.appendChild(t.createHiddenElement("email_cobranca",t.email)),a.appendChild(t.createHiddenElement("tipo","CP")),a.appendChild(t.createHiddenElement("moeda","BRL"));for(var r in t.items){var n=t.items[r];a.appendChild(t.createHiddenElement("item_id_"+i,i)),a.appendChild(t.createHiddenElement("item_descr_"+i,n.name)),a.appendChild(t.createHiddenElement("item_quant_"+i,n.quantity)),a.appendChild(t.createHiddenElement("item_valor_"+i,e(n.price))),a.appendChild(t.createHiddenElement("item_frete_"+i,t.taxRate)),a.appendChild(t.createHiddenElement("item_peso_"+i,n.weight)),i++}document.body.appendChild(a),a.submit(),document.body.removeChild(a)},t.load=function(){var e=this;if(e.items={},e.total=0,e.quantity=0,readCookie("simpleCart"))for(var t=unescape(readCookie("simpleCart")).split("++"),a=0,i=t.length;a<i;a++){var r=t[a].split("||"),n=new CartItem;n.parseValuesFromArray(r)&&(n.checkQuantityAndPrice(),e.items[n.id]=n)}e.isLoaded=!0},t.save=function(){var e="";for(var t in this.items)e=e+"++"+this.items[t].print();createCookie("simpleCart",e.substring(2),30)},t.initializeView=function(){var e=this;e.totalOutlets=getElementsByClassName("simpleCart_total"),e.quantityOutlets=getElementsByClassName("simpleCart_quantity"),e.cartDivs=getElementsByClassName("simpleCart_items"),e.taxCostOutlets=getElementsByClassName("simpleCart_taxCost"),e.taxRateOutlets=getElementsByClassName("simpleCart_taxRate"),e.shippingCostOutlets=getElementsByClassName("simpleCart_shippingCost"),e.shippingWeightOutlets=getElementsByClassName("simpleCart_shippingWeight"),e.finalTotalOutlets=getElementsByClassName("simpleCart_finalTotal"),e.addEventToArray(getElementsByClassName("simpleCart_checkout"),simpleCart.checkout,"click"),e.addEventToArray(getElementsByClassName("simpleCart_empty"),simpleCart.empty,"click"),e.Shelf.readPage(),e.pageIsReady=!0},t.updateView=function(){t.updateViewTotals(),t.cartDivs&&t.cartDivs.length>0&&t.updateCartView()},t.updateViewTotals=function(){for(var e=[["quantity","none"],["total","currency"],["shippingCost","currency"],["shippingWeight","currency"],["taxCost","currency"],["taxRate","percentage"],["finalTotal","currency"]],a=0,i=e.length;a<i;a++){var r,n=e[a][0]+"Outlets";for(var s in t[n]){switch(e[a][1]){case"none":r=""+t[e[a][0]];break;case"currency":r=t.valueToCurrencyString(t[e[a][0]]);break;case"percentage":r=t.valueToPercentageString(t[e[a][0]]);break;default:r=""+t[e[a][0]]}t[n][s].innerHTML=""+r}}},t.updateCartView=function(){var e,a,i,r,n,s,o,l,c,u,p=[];a=document.createElement("div");for(n in t.cartHeaders){for(s=document.createElement("div"),u=t.cartHeaders[n].split("_"),s.innerHTML=u[0],s.className="item"+u[0],e=1,xlen=u.length;e<xlen;e++)"noheader"==u[e].toLowerCase()&&(s.style.display="none");a.appendChild(s)}a.className="cartHeaders",p[0]=a,e=1;for(r in t.items){a=document.createElement("div"),i=t.items[r];for(n in t.cartHeaders){switch(s=document.createElement("div"),o=t.cartHeaders[n].split("_"),o[0].toLowerCase()){case"total":l=t.valueToCurrencyString(parseFloat(i.price)*parseInt(i.quantity,10));break;case"increment":l=t.valueToLink('<i class="fa fa-plus-circle" title="Adicionar + 1"></i>',"javascript:;","onclick=\"simpleCart.items['"+i.id+"'].increment();\"");break;case"decrement":l=t.valueToLink('<i class="fa fa-minus-circle" title="Remover - 1"></i>',"javascript:;","onclick=\"simpleCart.items['"+i.id+"'].decrement();\"");break;case"remove":l=t.valueToLink('<i class="fa fa-times-circle" title="Excluir"></i>',"javascript:;","onclick=\"simpleCart.items['"+i.id+"'].remove();\"");break;case"price":l=t.valueToCurrencyString(i[o[0].toLowerCase()]?i[o[0].toLowerCase()]:" ");break;default:l=i[o[0].toLowerCase()]?i[o[0].toLowerCase()]:" "}for(var m=1,d=o.length;m<d;m++)switch(c=o[m].toLowerCase()){case"image":case"img":l=t.valueToImageString(l);break;case"input":l=t.valueToTextInput(l,"onchange=\"simpleCart.items['"+i.id+"'].set('"+l+"' , this.value);\"");break;case"div":case"span":case"h1":case"h2":case"h3":case"h4":case"p":l=t.valueToElement(c,l,"");break;case"noheader":break;default:error("unkown header option: "+c)}s.innerHTML=l,s.className="item"+o[0],a.appendChild(s)}a.className="itemContainer",p[e]=a,e++}for(r in t.cartDivs){for(var h=t.cartDivs[r];h.childNodes[0];)h.removeChild(h.childNodes[0]);for(var f=0,C=p.length;f<C;f++)h.appendChild(p[f])}},t.addEventToArray=function(e,t,a){for(var i in e){var r=e[i];r.addEventListener?r.addEventListener(a,t,!1):r.attachEvent&&r.attachEvent("on"+a,t)}},t.createHiddenElement=function(e,t){var a=document.createElement("input");return a.type="hidden",a.name=e,a.value=t,a},t.currencySymbol=function(){switch(t.currency){case JPY:return"&yen;";case EUR:return"&euro;";case GBP:return"&pound;";case USD:case CAD:case AUD:case NZD:case HKD:case SGD:return"&#36;";default:return"R&#36;"}},t.currencyStringForPaypalCheckout=function(e){return"&#36;"==t.currencySymbol()?"$"+parseFloat(e).toFixed(2):""+parseFloat(e).toFixed(2)},t.valueToCurrencyString=function(e){return parseFloat(e).toCurrency(t.currencySymbol())},t.valueToPercentageString=function(e){return parseFloat(100*e)+"%"},t.valueToImageString=function(e){return e.match(/<\s*img.*src\=/)?e:'<img class="img-responsive" src="'+e+'" />'},t.valueToTextInput=function(e,t){return'<input type="text" value="'+e+'" '+t+" />"},t.valueToLink=function(e,t,a){return'<a href="'+t+'" '+a+" >"+e+"</a>"},t.valueToElement=function(e,t,a){return"<"+e+" "+a+" > "+t+"</"+e+">"},t.hasItem=function(e){for(var a in t.items){var i=t.items[a],r=!0;for(var n in e)"function"!=typeof e[n]&&"quantity"!=n&&"id"!=n&&e[n]!=i[n]&&(r=!1);if(r)return a}return!1},t.update=function(){simpleCart.isLoaded||simpleCart.load(),simpleCart.pageIsReady||simpleCart.initializeView(),t.updateTotals(),t.updateView(),t.save()},t.updateTotals=function(){t.total=0,t.quantity=0;for(var e in t.items){var a=t.items[e];a.quantity<1?a.remove():null!==a.quantity&&"undefined"!=a.quantity&&(t.quantity=parseInt(t.quantity,10)+parseInt(a.quantity,10)),a.price&&(t.total=parseFloat(t.total)+parseInt(a.quantity,10)*parseFloat(a.price))}t.shippingCost=t.shipping(),t.taxCost=parseFloat(t.total)*t.taxRate,t.finalTotal=t.shippingCost+t.taxCost+t.total},t.shipping=function(){if(0===parseInt(t.quantity,10))return 0;var e,a,i=parseFloat(t.shippingFlatRate)+parseFloat(t.shippingTotalRate)*parseFloat(t.total)+parseFloat(t.shippingQuantityRate)*parseInt(t.quantity,10);for(a in t.items)e=t.items[a],e.shipping&&("function"==typeof e.shipping?i+=parseFloat(e.shipping()):i+=parseFloat(e.shipping));return i},t.initialize=function(){simpleCart.initializeView(),simpleCart.load(),simpleCart.update()}}function CartItem(){this.id="c"+NextId++}function Shelf(){this.items={}}function ShelfItem(){this.id="s"+NextId++}function createCookie(e,t,a){if(a){var i=new Date;i.setTime(i.getTime()+24*a*60*60*1e3);var r="; expires="+i.toGMTString()}else var r="";document.cookie=e+"="+t+r+"; path=/"}function readCookie(e){for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var r=a[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}function eraseCookie(e){createCookie(e,"",-1)}function error(e){try{console.log(e)}catch(e){}}var NextId=1,PagSeguro="PagSeguro",GoogleCheckout="GoogleCheckout",PayPal="PayPal",Email="Email",AustralianDollar=AUD="AUD",CanadianDollar=CAD="CAD",CzechKoruna=CZK="CZK",DanishKrone=DKK="DKK",Euro=EUR="EUR",HongKongDollar=HKD="HKD",HungarianForint=HUF="HUF",IsraeliNewSheqel=ILS="ILS",JapaneseYen=JPY="JPY",MexicanPeso=MXN="MXN",NorwegianKrone=NOK="NOK",NewZealandDollar=NZD="NZD",PolishZloty=PLN="PLN",PoundSterling=GBP="GBP",SingaporeDollar=SGD="SGD",SwedishKrona=SEK="SEK",BrazilianReal=BRL="BRL",SwissFranc=CHF="CHF",USDollar=USD="USD";CartItem.prototype.set=function(e,t){e=e.toLowerCase(),"function"!=typeof this[e]&&"id"!=e?("quantity"==e?(t=t.replace(/[^(\d|\.)]*/gi,""),t=t.replace(/,*/gi,""),t=parseInt(t,10)):"price"==e&&(t=t.replace(/[^(\d|\.)]*/gi,""),t=t.replace(/,*/gi,""),t=parseFloat(t)),"number"==typeof t&&isNaN(t)?error("Entrada formatada incorretamente."):(this[e]=t,this.checkQuantityAndPrice())):error("Não é possível modificar o campo "+e+", este é um campo reservado."),simpleCart.update()},CartItem.prototype.increment=function(){this.quantity=parseInt(this.quantity,10)+1,simpleCart.update()},CartItem.prototype.decrement=function(){parseInt(this.quantity,10)<2?this.remove():(this.quantity=parseInt(this.quantity,10)-1,simpleCart.update())},CartItem.prototype.print=function(){var e="";for(var t in this)"function"!=typeof this[t]&&(e+=escape(t)+"="+escape(this[t])+"||");return e.substring(0,e.length-2)},CartItem.prototype.checkQuantityAndPrice=function(){this.price&&null!=this.quantity&&"undefined"!=this.quantity?(this.quantity=(""+this.quantity).replace(/,*/gi,""),this.quantity=parseInt((""+this.quantity).replace(/[^(\d|\.)]*/gi,""),10),isNaN(this.quantity)&&(error("Quantidade não é um número."),this.quantity=1)):(this.quantity=1,error("Item não tem quantidade.")),this.price&&null!=this.price&&"undefined"!=this.price?(this.price=(""+this.price).replace(/,*/gi,""),this.price=parseFloat((""+this.price).replace(/[^(\d|\.)]*/gi,"")),isNaN(this.price)&&(error("Preço não é um número."),this.price=0)):(this.price=0,error("O item não possui preço ou o preço foi formatado incorretamente"))},CartItem.prototype.parseValuesFromArray=function(e){if(e&&e.length&&e.length>0){for(var t=0,a=e.length;t<a;t++){e[t].replace(/||/,"| |"),e[t].replace(/\+\+/,"+ +");var i=e[t].split("=");if(i.length>1){if(i.length>2)for(var r=2,n=i.length;r<n;r++)i[1]=i[1]+"="+i[r];this[unescape(i[0]).toLowerCase()]=unescape(i[1])}}return!0}return!1},CartItem.prototype.remove=function(){simpleCart.remove(this.id),simpleCart.update()},Shelf.prototype.readPage=function(){this.items={};var e=getElementsByClassName("simpleCart_shelfItem");for(var t in e){var a=new ShelfItem;this.checkChildren(e[t],a),this.items[a.id]=a}},Shelf.prototype.checkChildren=function(e,t){for(var a=0;e.childNodes[a];a++){var i=e.childNodes[a];if(i.className&&i.className.match(/item_[^ ]+/)){var r=/item_[^ ]+/.exec(i.className)[0].split("_");if("add"==r[1]||"Add"==r[1]){var n=[];n.push(i);var s=simpleCart.Shelf.addToCart(t.id);simpleCart.addEventToArray(n,s,"click"),i.id=t.id}else t[r[1]]=i}i.childNodes[0]&&this.checkChildren(i,t)}},Shelf.prototype.empty=function(){this.items={}},Shelf.prototype.addToCart=function(e){return function(){simpleCart.Shelf.items[e]?simpleCart.Shelf.items[e].addToCart():error("O item com o id "+e+" não existe!")}},ShelfItem.prototype.remove=function(){simpleCart.Shelf.items[this.id]=null},ShelfItem.prototype.addToCart=function(){var e,t=[];for(var a in this)if("function"!=typeof this[a]&&"id"!=a){switch(e="",a){case"price":this[a].value?e=this[a].value:this[a].innerHTML&&(e=this[a].innerHTML),e=e.replace(/[^(\d|\.)]*/gi,""),e=e.replace(/,*/,"");break;case"image":e=this[a].src;break;default:e=this[a].value?this[a].value:this[a].innerHTML?this[a].innerHTML:this[a].src?this[a].src:this[a]}t.push(a+"="+e)}simpleCart.add(t)};var getElementsByClassName=function(e,t,a){return(getElementsByClassName=document.getElementsByClassName?function(e,t,a){a=a||document;for(var i,r=a.getElementsByClassName(e),n=t?new RegExp("\\b"+t+"\\b","i"):null,s=[],o=0,l=r.length;o<l;o+=1)i=r[o],n&&!n.test(i.nodeName)||s.push(i);return s}:document.evaluate?function(e,t,a){t=t||"*",a=a||document;for(var i,r,n=e.split(" "),s="",o="http://www.w3.org/1999/xhtml"===document.documentElement.namespaceURI?"http://www.w3.org/1999/xhtml":null,l=[],c=0,u=n.length;c<u;c+=1)s+="[contains(concat(' ', @class, ' '), ' "+n[c]+" ')]";try{i=document.evaluate(".//"+t+s,a,o,0,null)}catch(e){i=document.evaluate(".//"+t+s,a,null,0,null)}for(;r=i.iterateNext();)l.push(r);return l}:function(e,t,a){t=t||"*",a=a||document;for(var i,r,n=e.split(" "),s=[],o="*"===t&&a.all?a.all:a.getElementsByTagName(t),l=[],c=0,u=n.length;c<u;c+=1)s.push(new RegExp("(^|\\s)"+n[c]+"(\\s|$)"));for(var p=0,m=o.length;p<m;p+=1){i=o[p],r=!1;for(var d=0,h=s.length;d<h&&(r=s[d].test(i.className));d+=1);r&&l.push(i)}return l})(e,t,a)};String.prototype.reverse=function(){return this.split("").reverse().join("")},Number.prototype.withCommas=function(){for(var e=6,t=parseFloat(this).toFixed(2).toString().reverse();e<t.length;)t=t.substring(0,e)+","+t.substring(e),e+=4;return t.reverse()},Number.prototype.toCurrency=function(){return(arguments[0]?arguments[0]:"$")+this.withCommas()};var simpleCart=new Cart;"undefined"!=typeof jQuery?$cart(document).ready(function(){simpleCart.initialize()}):"undefined"!=typeof Prototype?Event.observe(window,"load",function(){simpleCart.initialize()}):window.onload=simpleCart.initialize;